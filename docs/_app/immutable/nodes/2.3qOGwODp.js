import"../chunks/CWj6FrbW.js";import{p as Tt,aj as xt,af as K,G as Ke,i as t,e as bt,I as v,t as Y,a as Ft,ai as qe,ah as q,c as M,r as y,ag as de,ak as yt,al as Wt,W as Nt,am as Bt}from"../chunks/vSmyLr7s.js";import{f as I,a as m,t as Te,c as Be}from"../chunks/GC_zb-Bt.js";import{h as Ut}from"../chunks/DoIUFhFj.js";import{d as jt,s as Gt,a as B,b as zt,e as St}from"../chunks/D04MS1dE.js";import{i as A}from"../chunks/DrM7_I8L.js";import{e as st,i as ot,s as nt,r as Ht,b as Vt,a as Zt,c as wt}from"../chunks/1LbgPODU.js";import{b as $t}from"../chunks/BJ8uzye3.js";import{p as Jt}from"../chunks/D1ZKUEuM.js";const Kt=!0,Yt=Kt;var Mt={};(function Ue(O,ie,Ae,Le){var De=!!(O.Worker&&O.Blob&&O.Promise&&O.OffscreenCanvas&&O.OffscreenCanvasRenderingContext2D&&O.HTMLCanvasElement&&O.HTMLCanvasElement.prototype.transferControlToOffscreen&&O.URL&&O.URL.createObjectURL),je=typeof Path2D=="function"&&typeof DOMMatrix=="function",lt=function(){if(!O.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var n=a.transferToImageBitmap();e.createPattern(n,"no-repeat")}catch{return!1}return!0}();function Ye(){}function Fe(a){var e=ie.exports.Promise,n=e!==void 0?e:O.Promise;return typeof n=="function"?new n(a):(a(Ye,Ye),null)}var G=function(a,e){return{transform:function(n){if(a)return n;if(e.has(n))return e.get(n);var i=new OffscreenCanvas(n.width,n.height),l=i.getContext("2d");return l.drawImage(n,0,0),e.set(n,i),i},clear:function(){e.clear()}}}(lt,new Map),ke=function(){var a=Math.floor(16.666666666666668),e,n,i={},l=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(f){var d=Math.random();return i[d]=requestAnimationFrame(function c(p){l===p||l+a-1<p?(l=p,delete i[d],f()):i[d]=requestAnimationFrame(c)}),d},n=function(f){i[f]&&cancelAnimationFrame(i[f])}):(e=function(f){return setTimeout(f,a)},n=function(f){return clearTimeout(f)}),{frame:e,cancel:n}}(),ct=function(){var a,e,n={};function i(l){function f(d,c){l.postMessage({options:d||{},callback:c})}l.init=function(c){var p=c.transferControlToOffscreen();l.postMessage({canvas:p},[p])},l.fire=function(c,p,w){if(e)return f(c,null),e;var P=Math.random().toString(36).slice(2);return e=Fe(function(C){function T(L){L.data.callback===P&&(delete n[P],l.removeEventListener("message",T),e=null,G.clear(),w(),C())}l.addEventListener("message",T),f(c,P),n[P]=T.bind(null,{data:{callback:P}})}),e},l.reset=function(){l.postMessage({reset:!0});for(var c in n)n[c](),delete n[c]}}return function(){if(a)return a;if(!Ae&&De){var l=["var CONFETTI, SIZE = {}, module = {};","("+Ue.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([l])))}catch(f){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",f),null}i(a)}return a}}(),it={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function Me(a,e){return e?e(a):a}function Oe(a){return a!=null}function E(a,e,n){return Me(a&&Oe(a[e])?a[e]:it[e],n)}function ut(a){return a<0?0:Math.floor(a)}function vt(a,e){return Math.floor(Math.random()*(e-a))+a}function b(a){return parseInt(a,16)}function ft(a){return a.map(R)}function R(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:b(e.substring(0,2)),g:b(e.substring(2,4)),b:b(e.substring(4,6))}}function z(a){var e=E(a,"origin",Object);return e.x=E(e,"x",Number),e.y=E(e,"y",Number),e}function ht(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function ae(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function le(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function me(a,e,n,i,l,f,d,c,p){a.save(),a.translate(e,n),a.rotate(f),a.scale(i,l),a.arc(0,0,1,d,c,p),a.restore()}function se(a){var e=a.angle*(Math.PI/180),n=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*n-Math.random()*n),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function Ce(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var n=e.tick++/e.totalTicks,i=e.x+e.random*e.tiltCos,l=e.y+e.random*e.tiltSin,f=e.wobbleX+e.random*e.tiltCos,d=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-n)+")",a.beginPath(),je&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(Q(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(f-i)*.1,Math.abs(d-l)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var c=Math.PI/10*e.wobble,p=Math.abs(f-i)*.1,w=Math.abs(d-l)*.1,P=e.shape.bitmap.width*e.scalar,C=e.shape.bitmap.height*e.scalar,T=new DOMMatrix([Math.cos(c)*p,Math.sin(c)*p,-Math.sin(c)*w,Math.cos(c)*w,e.x,e.y]);T.multiplySelf(new DOMMatrix(e.shape.matrix));var L=a.createPattern(G.transform(e.shape.bitmap),"no-repeat");L.setTransform(T),a.globalAlpha=1-n,a.fillStyle=L,a.fillRect(e.x-P/2,e.y-C/2,P,C),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(f-i)*e.ovalScalar,Math.abs(d-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):me(a,e.x,e.y,Math.abs(f-i)*e.ovalScalar,Math.abs(d-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var h=Math.PI/2*3,H=4*e.scalar,Z=8*e.scalar,$=e.x,re=e.y,ve=5,ne=Math.PI/ve;ve--;)$=e.x+Math.cos(h)*Z,re=e.y+Math.sin(h)*Z,a.lineTo($,re),h+=ne,$=e.x+Math.cos(h)*H,re=e.y+Math.sin(h)*H,a.lineTo($,re),h+=ne;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(l)),a.lineTo(Math.floor(f),Math.floor(d)),a.lineTo(Math.floor(i),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function xe(a,e,n,i,l){var f=e.slice(),d=a.getContext("2d"),c,p,w=Fe(function(P){function C(){c=p=null,d.clearRect(0,0,i.width,i.height),G.clear(),l(),P()}function T(){Ae&&!(i.width===Le.width&&i.height===Le.height)&&(i.width=a.width=Le.width,i.height=a.height=Le.height),!i.width&&!i.height&&(n(a),i.width=a.width,i.height=a.height),d.clearRect(0,0,i.width,i.height),f=f.filter(function(L){return Ce(d,L)}),f.length?c=ke.frame(T):C()}c=ke.frame(T),p=C});return{addFettis:function(P){return f=f.concat(P),w},canvas:a,promise:w,reset:function(){c&&ke.cancel(c),p&&p()}}}function U(a,e){var n=!a,i=!!E(e||{},"resize"),l=!1,f=E(e,"disableForReducedMotion",Boolean),d=De&&!!E(e||{},"useWorker"),c=d?ct():null,p=n?ht:ae,w=a&&c?!!a.__confetti_initialized:!1,P=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,C;function T(h,H,Z){for(var $=E(h,"particleCount",ut),re=E(h,"angle",Number),ve=E(h,"spread",Number),ne=E(h,"startVelocity",Number),dt=E(h,"decay",Number),mt=E(h,"gravity",Number),Qe=E(h,"drift",Number),Ge=E(h,"colors",ft),pt=E(h,"ticks",Number),We=E(h,"shapes"),Xe=E(h,"scalar"),ze=!!E(h,"flat"),et=z(h),He=$,Ve=[],tt=a.width*et.x,gt=a.height*et.y;He--;)Ve.push(se({x:tt,y:gt,angle:re,spread:ve,startVelocity:ne,color:Ge[He%Ge.length],shape:We[vt(0,We.length)],ticks:pt,decay:dt,gravity:mt,drift:Qe,scalar:Xe,flat:ze}));return C?C.addFettis(Ve):(C=xe(a,Ve,p,H,Z),C.promise)}function L(h){var H=f||E(h,"disableForReducedMotion",Boolean),Z=E(h,"zIndex",Number);if(H&&P)return Fe(function(ne){ne()});n&&C?a=C.canvas:n&&!a&&(a=le(Z),document.body.appendChild(a)),i&&!w&&p(a);var $={width:a.width,height:a.height};c&&!w&&c.init(a),w=!0,c&&(a.__confetti_initialized=!0);function re(){if(c){var ne={getBoundingClientRect:function(){if(!n)return a.getBoundingClientRect()}};p(ne),c.postMessage({resize:{width:ne.width,height:ne.height}});return}$.width=$.height=null}function ve(){C=null,i&&(l=!1,O.removeEventListener("resize",re)),n&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,w=!1)}return i&&!l&&(l=!0,O.addEventListener("resize",re,!1)),c?c.fire(h,$,ve):T(h,$,ve)}return L.reset=function(){c&&c.reset(),C&&C.reset()},L}var pe;function Ie(){return pe||(pe=U(null,{useWorker:!0,resize:!0})),pe}function Q(a,e,n,i,l,f,d){var c=new Path2D(a),p=new Path2D;p.addPath(c,new DOMMatrix(e));var w=new Path2D;return w.addPath(p,new DOMMatrix([Math.cos(d)*l,Math.sin(d)*l,-Math.sin(d)*f,Math.cos(d)*f,n,i])),w}function ue(a){if(!je)throw new Error("path confetti are not supported in this browser");var e,n;typeof a=="string"?e=a:(e=a.path,n=a.matrix);var i=new Path2D(e),l=document.createElement("canvas"),f=l.getContext("2d");if(!n){for(var d=1e3,c=d,p=d,w=0,P=0,C,T,L=0;L<d;L+=2)for(var h=0;h<d;h+=2)f.isPointInPath(i,L,h,"nonzero")&&(c=Math.min(c,L),p=Math.min(p,h),w=Math.max(w,L),P=Math.max(P,h));C=w-c,T=P-p;var H=10,Z=Math.min(H/C,H/T);n=[Z,0,0,Z,-Math.round(C/2+c)*Z,-Math.round(T/2+p)*Z]}return{type:"path",path:e,matrix:n}}function oe(a){var e,n=1,i="#000000",l='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,n="scalar"in a?a.scalar:n,l="fontFamily"in a?a.fontFamily:l,i="color"in a?a.color:i);var f=10*n,d=""+f+"px "+l,c=new OffscreenCanvas(f,f),p=c.getContext("2d");p.font=d;var w=p.measureText(e),P=Math.ceil(w.actualBoundingBoxRight+w.actualBoundingBoxLeft),C=Math.ceil(w.actualBoundingBoxAscent+w.actualBoundingBoxDescent),T=2,L=w.actualBoundingBoxLeft+T,h=w.actualBoundingBoxAscent+T;P+=T+T,C+=T+T,c=new OffscreenCanvas(P,C),p=c.getContext("2d"),p.font=d,p.fillStyle=i,p.fillText(e,L,h);var H=1/n;return{type:"bitmap",bitmap:c.transferToImageBitmap(),matrix:[H,0,0,H,-P*H/2,-C*H/2]}}ie.exports=function(){return Ie().apply(this,arguments)},ie.exports.reset=function(){Ie().reset()},ie.exports.create=U,ie.exports.shapeFromPath=ue,ie.exports.shapeFromText=oe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Mt,!1);const qt=Mt.exports;Mt.exports.create;var Qt=I('<span class="dissolve svelte-tfcqlg" style="animation: dissolve 1s ease-in;"> <strong class="svelte-tfcqlg"> </strong> </span>'),Xt=I("<span> </span>"),ea=I('<span class="blinking-cursor svelte-tfcqlg">|</span>'),ta=I("<!><!>",1),aa=I('<span class="placeholder-ellipsis svelte-tfcqlg">...</span>'),ra=I('<span class="blinking-cursor svelte-tfcqlg">|</span>'),sa=I('<span class="hard-mode-display svelte-tfcqlg"><!></span> <input type="text" class="hard-mode-input-real svelte-tfcqlg"/> <span class="punctuation svelte-tfcqlg"> </span>',1),oa=I('<option class="svelte-tfcqlg"> </option>'),na=I('<select class="svelte-tfcqlg"><option class="svelte-tfcqlg">--</option><!></select><span class="punctuation svelte-tfcqlg"> </span>',1),la=I(" <!>",1),ca=I("<span> </span>"),ia=I('<p class="poem-line svelte-tfcqlg"><!> <!></p>'),ua=I('<button class="hint-button svelte-tfcqlg">ðŸ’¡ Hint</button>'),va=I('<button class="fifty-fifty-button svelte-tfcqlg">ðŸ’¡ Hint: 50/50</button>'),fa=I('<div class="button-group svelte-tfcqlg"><button class="check-button svelte-tfcqlg">ðŸ“š Check Answer</button> <!> <button class="give-up-button svelte-tfcqlg">Give up</button></div>'),ha=I('<span class="hints-used svelte-tfcqlg"> </span>'),da=I('<span class="fifty-fifty-used svelte-tfcqlg"> </span>'),ma=I('<span class="subtle-message svelte-tfcqlg"><!></span>'),pa=I("<button> </button>"),ga=I('<div class="author-guess-section svelte-tfcqlg" style="animation: fadeInUp 0.6s ease-out;"><h3 class="svelte-tfcqlg">Who wrote this poem?</h3> <div class="author-buttons svelte-tfcqlg"></div></div>'),_a=I('<img class="author-image svelte-tfcqlg"/>'),ba=I('<div class="reveal-box svelte-tfcqlg" style="animation: fadeInUp 0.8s ease-out;"><p> </p> <div class="reveal-content-box svelte-tfcqlg"><!> <p class="reveal-label svelte-tfcqlg">The correct author was:</p> <p class="reveal-author-name svelte-tfcqlg"> </p> <p class="reveal-label svelte-tfcqlg">Excerpt from:</p> <p class="reveal-title svelte-tfcqlg"> </p></div> <a class="poem-link-button svelte-tfcqlg" target="_blank" rel="noopener noreferrer">Read this poem â†’</a> <button class="share-button svelte-tfcqlg"><span class="svelte-tfcqlg">Share your results <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24" width="20" class="svelte-tfcqlg"><path fill="white" d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" class="svelte-tfcqlg"></path></svg></span></button></div>'),ya=I('<div class="copy-notification svelte-tfcqlg">Score copied to clipboard!</div>'),wa=I('<div class="container svelte-tfcqlg"><div class="poem-wrapper svelte-tfcqlg"><h3 class="instruction-title svelte-tfcqlg">Complete the rhymes in this poem. <span class="instruction-subtitle svelte-tfcqlg"><!></span></h3> <div class="poem svelte-tfcqlg"></div></div> <!> <div class="attempts-info svelte-tfcqlg"> <span class="score svelte-tfcqlg"> </span> <!> <!> <!></div> <!> <!></div>');function Ma(Ue,O){Tt(O,!0);const ie=()=>zt(Jt,"$page",Ae),[Ae,Le]=Gt(),De=xt("data"),je=De.poemsData,lt=De.allAuthors,Ye=De.authorImages,Fe=xt("hardMode"),G=qe(()=>(Fe==null?void 0:Fe.isHardMode)??!1),ke=new Date,ct=`${ke.getFullYear()}-${String(ke.getMonth()+1).padStart(2,"0")}-${String(ke.getDate()).padStart(2,"0")}`;function it(){{const s=ie().url.searchParams.get("date");if(s)return s}return ct}let Me=qe(it);function Oe(s,o){const r=[...s];let u=o;for(let g=r.length-1;g>0;g--){u=(u*9301+49297)%233280;const _=Math.floor(u/233280*(g+1));[r[g],r[_]]=[r[_],r[g]]}return r}function E(s){const[o,r,u]=s.split("-");return`${r}-${u}-${o}`}function ut(s){const o=E(s);let r=je[o];if(!r){const k=Object.values(je),[S,j,ge]=s.split("-").map(Number),_e=new Date(S,j-1,ge),X=Math.floor(_e.getTime()/(1e3*60*60*24));r=k[X%k.length]}const[u,g,_]=s.split("-").map(Number),x=new Date(u,g-1,_),F=Math.floor(x.getTime()/(1e3*60*60*24)),D=r.lines.map((k,S)=>{let j=[];if(!k.no_choices){const ge=k.correct_last_word,X=Oe(k.distractors,F+S).slice(0,2),W=[ge,...X];j=Oe(W,F+S+1e3)}return{...k,choices:j}});return{...r,author_image:Ye[r.author_name]||r.author_image||"",lines:D}}function vt(s,o){const[r,u,g]=s.split("-").map(Number),_=new Date(r,u-1,g),x=Math.floor(_.getTime()/(1e3*60*60*24)),F=lt.filter(S=>S&&S!==o.author_name).sort(),k=Oe(F,x).slice(0,4);return Oe([o.author_name,...k],x)}let b=qe(()=>ut(t(Me))),ft=qe(()=>vt(t(Me),t(b))),R=K(Ke(t(b).lines.map(()=>""))),z=K(0),ht=3,ae=K(0),le=K(!1),me=K(!1),se=K(""),Ce=K(!1),xe=K(!1),U=K(Ke(t(b).lines.map(()=>null))),pe=K(Ke(t(b).lines.map(()=>""))),Ie=K(null),Q=K(0),ue=K(Ke(t(b).lines.map(()=>null))),oe=K(0);function a(){const s=localStorage.getItem("rhymedle-game");if(s)try{const r=JSON.parse(s)[t(Me)];r&&(v(R,r.selectedWords||t(b).lines.map(()=>""),!0),v(z,r.attemptsUsed||0,!0),v(ae,r.correctCount||0,!0),v(le,r.showFinalReveal||!1,!0),v(me,r.showAuthorGuess||!1,!0),v(se,r.selectedAuthor||"",!0),v(Ce,r.authorSubmitted||!1,!0),v(xe,r.showDramaticReveal||!1,!0),v(U,r.lineResults||t(b).lines.map(()=>null),!0),v(pe,r.lastCheckedWords||t(b).lines.map(()=>""),!0),v(Q,r.hintsUsed||0,!0),v(ue,r.fiftyFiftyChoices||t(b).lines.map(()=>null),!0),v(oe,r.fiftyFiftyUsed||0,!0))}catch(o){console.error("Error loading game state:",o)}}function e(){const s=localStorage.getItem("rhymedle-game"),o=s?JSON.parse(s):{};o[t(Me)]={selectedWords:t(R),attemptsUsed:t(z),correctCount:t(ae),totalCount:l,showFinalReveal:t(le),showAuthorGuess:t(me),selectedAuthor:t(se),authorSubmitted:t(Ce),showDramaticReveal:t(xe),lineResults:t(U),lastCheckedWords:t(pe),hintsUsed:t(Q),fiftyFiftyChoices:t(ue),fiftyFiftyUsed:t(oe)},localStorage.setItem("rhymedle-game",JSON.stringify(o))}let n=!1;bt(()=>{t(Me)&&(n=!0,v(R,t(b).lines.map(()=>""),!0),v(z,0),v(ae,0),v(le,!1),v(me,!1),v(se,""),v(Ce,!1),v(xe,!1),v(U,t(b).lines.map(()=>null),!0),v(Q,0),v(ue,t(b).lines.map(()=>null),!0),v(oe,0),a(),n=!1)}),bt(()=>{!n&&Yt&&(t(R),t(z),t(ae),t(le),t(me),t(se),t(Ce),t(xe),t(U),t(pe),t(Q),t(ue),t(oe),e())});const i=t(b).lines.filter(s=>!s.no_choices);let l=Ke(i.length);function f(){let s=0;const o=[];t(b).lines.forEach((r,u)=>{var g;if(r.no_choices)o.push(null);else{let _;if(t(G)){const{word:x}=h(r.correct_last_word||"");_=((g=t(R)[u])==null?void 0:g.toLowerCase())===x.toLowerCase()}else _=t(R)[u]===r.correct_last_word;o.push(_?"correct":"incorrect"),_&&s++}}),v(U,o,!0),v(ae,s,!0),yt(z),v(pe,[...t(R)],!0),(s===l||t(z)>=ht)&&(v(le,!0),v(me,!0),s===l&&d())}function d(){const s=Date.now()+1200,o=["#10493b","#d2a710","#ffffff"];(function r(){qt({particleCount:3,angle:60,spread:55,origin:{x:0},colors:o}),qt({particleCount:3,angle:120,spread:55,origin:{x:1},colors:o}),Date.now()<s&&requestAnimationFrame(r)})()}function c(){v(Ce,!0),v(xe,!0),t(se)===t(b).author_name&&d()}function p(){const s=t(b).lines.map((o,r)=>o.no_choices?null:t(R)[r]===o.correct_last_word?"correct":"incorrect");v(U,s,!0),v(le,!0),v(me,!0)}function w(){t(G)&&(yt(Q),t(b).lines.forEach((s,o)=>{if(!s.no_choices){const{word:r}=h(s.correct_last_word||""),u=r.substring(0,t(Q)),g=t(R)[o].toLowerCase(),_=r.substring(0,g.length).toLowerCase();(g!==_||t(R)[o].length<t(Q))&&(t(R)[o]=u)}}))}function P(){if(t(G))return;yt(oe);const s=[...t(ue)];t(b).lines.forEach((o,r)=>{if(!o.no_choices&&t(U)[r]!=="correct"&&!t(ue)[r]){const u=o.correct_last_word,g=o.choices.filter(D=>D!==u),_=Math.floor(Math.random()*g.length),x=g[_],F=Math.random()<.5?[u,x]:[x,u];s[r]=F}}),v(ue,s,!0)}function C(){const s=t(se)===t(b).author_name,o=t(G)?"Hard Mode":"Easy Mode",r=t(G)&&t(Q)>0?`, ${t(Q)} hint${t(Q)>1?"s":""}`:"",u=!t(G)&&t(oe)>0?`, ${t(oe)} hint${t(oe)>1?"s":""} (50/50)`:"",g=`Rhymedle ${t(Me)} (${o})

Rhymes: ${t(ae)}/${l} (${t(z)===0?"gave up":`${t(z)} attempt${t(z)>1?"s":""}`}${r}${u})
Author: ${s?"âœ“":"âœ—"}

${window.location.origin}${window.location.pathname.replace(/\/$/,"")}`;navigator.clipboard.writeText(g).then(()=>{v(T,!0),setTimeout(()=>{v(T,!1)},2e3)})}let T=K(!1);function L(s){return s.split(" ").slice(0,-1).join(" ")}function h(s){const o=s.match(/^(.+?)([.,;:!?\-â€”]*)$/);return o?{word:o[1],punctuation:o[2]}:{word:s,punctuation:""}}function H(s,o,r,u){var F;if(!s||r>=s.length||!t(U)[u]||t(U)[u]===null)return"";const g=t(pe)[u]||"";if(r>=g.length||s[r]!==g[r])return"";const _=s[r].toLowerCase(),x=(F=o[r])==null?void 0:F.toLowerCase();return _===x?"correct-letter":"incorrect-letter"}bt(()=>t(b).lines.every((o,r)=>{if(o.no_choices)return!0;if(t(G)){const{word:u}=h(o.correct_last_word||"");return t(R)[r].toLowerCase()===u.toLowerCase()}return t(R)[r]!==""}));var Z=wa(),$=M(Z),re=M($),ve=q(M(re)),ne=M(ve);{var dt=s=>{var o=Te("(Fill in the Blank)");m(s,o)},mt=s=>{var o=Te("(Select One)");m(s,o)};A(ne,s=>{t(G)?s(dt):s(mt,!1)})}y(ve),y(re);var Qe=q(re,2);st(Qe,21,()=>t(b).lines,ot,(s,o,r)=>{var u=ia(),g=M(u);{var _=k=>{var S=Te();Y(()=>B(S,t(o).line_text)),m(k,S)},x=k=>{var S=Be(),j=de(S);{var ge=X=>{const W=qe(()=>{const{word:N,punctuation:Se}=h(t(o).correct_last_word||"");return{word:N,punctuation:Se}});var J=Qt(),be=M(J),ce=q(be),ye=M(ce,!0);y(ce);var fe=q(ce,1,!0);y(J),Y(N=>{B(be,`${N??""} `),B(ye,t(W).word),B(fe,t(W).punctuation)},[()=>L(t(o).line_text)]),m(X,J)},_e=X=>{const W=qe(()=>{const{word:N,punctuation:Se}=h(t(o).correct_last_word||"");return{correctWord:N,punctuation:Se}});var J=la(),be=de(J),ce=q(be);{var ye=N=>{var Se=sa(),Pe=de(Se);Pe.__click=V=>{const ee=V.currentTarget.nextElementSibling;ee&&ee.focus()};var Re=M(Pe);{var Ze=V=>{var ee=ta(),he=de(ee);st(he,17,()=>t(R)[r],ot,(te,Ee,Lt)=>{var rt=Xt(),Dt=M(rt,!0);y(rt),Y(Ot=>{nt(rt,1,`letter-char ${Ot??""}`,"svelte-tfcqlg"),B(Dt,t(Ee))},[()=>H(t(R)[r],t(W).correctWord,Lt,r)]),m(te,rt)});var Je=q(he);{var Ne=te=>{var Ee=ea();m(te,Ee)};A(Je,te=>{t(Ie)===r&&te(Ne)})}m(V,ee)},_t=V=>{var ee=Be(),he=de(ee);{var Je=te=>{var Ee=aa();m(te,Ee)},Ne=te=>{var Ee=ra();m(te,Ee)};A(he,te=>{t(Ie)!==r?te(Je):te(Ne,!1)},!0)}m(V,ee)};A(Re,V=>{t(R)[r]?V(Ze):V(_t,!1)})}y(Pe);var we=q(Pe,2);Ht(we);var at=q(we,2),$e=M(at,!0);y(at),Y(()=>{we.disabled=t(z)>0&&t(U)[r]==="correct",B($e,t(W).punctuation)}),St("focus",we,V=>{v(Ie,r,!0);const ee=V.target;setTimeout(()=>{ee.selectionStart=ee.selectionEnd=ee.value.length},0)}),St("blur",we,()=>v(Ie,null)),$t(we,()=>t(R)[r],V=>t(R)[r]=V),m(N,Se)},fe=N=>{const Se=qe(()=>t(ue)[r]||t(o).choices);var Pe=na(),Re=de(Pe),Ze=M(Re);Ze.value=Ze.__value="";var _t=q(Ze);st(_t,17,()=>t(Se),ot,($e,V)=>{const ee=qe(()=>{const{word:te}=h(t(V));return{word:te}});var he=oa(),Je=M(he,!0);y(he);var Ne={};Y(()=>{B(Je,t(ee).word),Ne!==(Ne=t(V))&&(he.value=(he.__value=t(V))??"")}),m($e,he)}),y(Re);var we=q(Re),at=M(we,!0);y(we),Y(()=>{Re.disabled=t(z)>0&&t(U)[r]==="correct",B(at,t(W).punctuation)}),Vt(Re,()=>t(R)[r],$e=>t(R)[r]=$e),m(N,Pe)};A(ce,N=>{t(G)?N(ye):N(fe,!1)})}Y(N=>B(be,`${N??""} `),[()=>L(t(o).line_text)]),m(X,J)};A(j,X=>{t(le)?X(ge):X(_e,!1)},!0)}m(k,S)};A(g,k=>{t(o).no_choices?k(_):k(x,!1)})}var F=q(g,2);{var D=k=>{var S=ca(),j=M(S,!0);y(S),Y(()=>{nt(S,1,`line-result ${t(U)[r]??""}`,"svelte-tfcqlg"),B(j,t(U)[r]==="correct"?"âœ“":"âœ—")}),m(k,S)};A(F,k=>{t(U)[r]&&k(D)})}y(u),m(s,u)}),y(Qe),y($);var Ge=q($,2);{var pt=s=>{var o=fa(),r=M(o);r.__click=f;var u=q(r,2);{var g=F=>{var D=ua();D.__click=w,m(F,D)},_=F=>{var D=va();D.__click=P,m(F,D)};A(u,F=>{t(G)?F(g):F(_,!1)})}var x=q(u,2);x.__click=p,y(o),Y(F=>r.disabled=F,[()=>t(b).lines.some((F,D)=>!F.no_choices&&t(R)[D]==="")]),m(s,o)};A(Ge,s=>{t(le)||s(pt)})}var We=q(Ge,2),Xe=M(We),ze=q(Xe),et=M(ze);y(ze);var He=q(ze,2);{var Ve=s=>{var o=ha(),r=M(o);y(o),Y(()=>B(r,`Hints: ${t(Q)??""}`)),m(s,o)};A(He,s=>{t(G)&&t(Q)>0&&s(Ve)})}var tt=q(He,2);{var gt=s=>{var o=da(),r=M(o);y(o),Y(()=>B(r,`Hints: ${t(oe)??""} (50/50)`)),m(s,o)};A(tt,s=>{!t(G)&&t(oe)>0&&s(gt)})}var kt=q(tt,2);{var It=s=>{var o=ma(),r=M(o);{var u=_=>{var x=Te("â€” Perfect!");m(_,x)},g=_=>{var x=Be(),F=de(x);{var D=S=>{var j=Te("â€” Excellent!");m(S,j)},k=S=>{var j=Be(),ge=de(j);{var _e=W=>{var J=Te("â€” Well done!");m(W,J)},X=W=>{var J=Be(),be=de(J);{var ce=fe=>{var N=Te("â€” Good effort!");m(fe,N)},ye=fe=>{var N=Te("â€” Keep practicing!");m(fe,N)};A(be,fe=>{t(ae)>=l*.5?fe(ce):fe(ye,!1)},!0)}m(W,J)};A(ge,W=>{t(ae)>=l*.7?W(_e):W(X,!1)},!0)}m(S,j)};A(F,S=>{t(ae)===l?S(D):S(k,!1)},!0)}m(_,x)};A(r,_=>{t(ae)===l&&t(z)===1?_(u):_(g,!1)})}y(o),m(s,o)};A(kt,s=>{t(le)&&s(It)})}y(We);var Ct=q(We,2);{var Pt=s=>{var o=ga(),r=q(M(o),2);st(r,21,()=>t(ft).filter(u=>u&&u.trim()),ot,(u,g)=>{var _=pa();_.__click=()=>{v(se,t(g),!0),c()};var x=M(_,!0);y(_),Y(()=>{nt(_,1,`author-button ${t(se)===t(g)?"selected":""}`,"svelte-tfcqlg"),B(x,t(g))}),m(u,_)}),y(r),y(o),m(s,o)},Rt=s=>{var o=Be(),r=de(o);{var u=g=>{var _=ba(),x=M(_),F=M(x);y(x);var D=q(x,2),k=M(D);{var S=ce=>{var ye=_a();Y(()=>{wt(ye,"src",t(b).author_image),wt(ye,"alt",t(b).author_name)}),m(ce,ye)};A(k,ce=>{t(b).author_image&&ce(S)})}var j=q(k,4),ge=M(j,!0);y(j);var _e=q(j,4),X=M(_e);y(_e),y(D);var W=q(D,2),J=q(W,2);J.__click=C;var be=M(J);Zt(be,{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}),y(J),y(_),Y(()=>{nt(x,1,`guess-label ${t(se)===t(b).author_name?"correct-guess":"incorrect-guess"}`,"svelte-tfcqlg"),B(F,`You guessed: ${t(se)??""}`),B(ge,t(b).author_name),B(X,`"${t(b).poem_title??""}"`),wt(W,"href",t(b).poem_link)}),m(g,_)};A(r,g=>{t(xe)&&g(u)},!0)}m(s,o)};A(Ct,s=>{t(me)&&!t(Ce)?s(Pt):s(Rt,!1)})}var Et=q(Ct,2);{var At=s=>{var o=ya();m(s,o)};A(Et,s=>{t(T)&&s(At)})}y(Z),Y(()=>{B(Xe,`Attempts: ${(t(z)===0?0:t(z))??""} / 3 `),B(et,`Score: ${t(ae)??""} / ${l??""}`)}),m(Ue,Z),Ft(),Le()}jt(["click"]);var Ca=I('<meta name="description" content="Guess the rhyming word to complete the poem"/>');function Ea(Ue,O){Tt(O,!0),Wt("data",O.data),Ut("1uha8ag",ie=>{var Ae=Ca();Nt(()=>{Bt.title="Rhymedle - Daily Poetry Rhyme Game"}),m(ie,Ae)}),Ma(Ue,{}),Ft()}export{Ea as component};
