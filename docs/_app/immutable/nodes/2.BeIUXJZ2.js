import"../chunks/CWj6FrbW.js";import{p as Dt,aj as At,af as U,G as et,i as t,e as kt,I as u,t as $,a as Ot,ai as we,ah as C,c as y,r as w,ag as ye,ak as Ft,al as Yt,W as Qt,am as Xt}from"../chunks/vSmyLr7s.js";import{f as S,a as _,t as lt,c as it}from"../chunks/GC_zb-Bt.js";import{h as er}from"../chunks/DoIUFhFj.js";import{d as tr,s as rr,a as L,b as ar,e as Lt}from"../chunks/D04MS1dE.js";import{i as B}from"../chunks/DrM7_I8L.js";import{e as ct,i as ut,s as ft,a as sr,b as vt,r as or,c as nr}from"../chunks/CZUU7WN1.js";import{b as lr}from"../chunks/BJ8uzye3.js";import{p as ir}from"../chunks/CKHbjMEX.js";const cr=!0,ur=cr;var It={};(function Ne(W,le,Fe,Ie){var Re=!!(W.Worker&&W.Blob&&W.Promise&&W.OffscreenCanvas&&W.OffscreenCanvasRenderingContext2D&&W.HTMLCanvasElement&&W.HTMLCanvasElement.prototype.transferControlToOffscreen&&W.URL&&W.URL.createObjectURL),Ue=typeof Path2D=="function"&&typeof DOMMatrix=="function",ht=function(){if(!W.OffscreenCanvas)return!1;try{var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var n=r.transferToImageBitmap();e.createPattern(n,"no-repeat")}catch{return!1}return!0}();function tt(){}function Me(r){var e=le.exports.Promise,n=e!==void 0?e:W.Promise;return typeof n=="function"?new n(r):(r(tt,tt),null)}var j=function(r,e){return{transform:function(n){if(r)return n;if(e.has(n))return e.get(n);var l=new OffscreenCanvas(n.width,n.height),f=l.getContext("2d");return f.drawImage(n,0,0),e.set(n,l),l},clear:function(){e.clear()}}}(ht,new Map),Ce=function(){var r=Math.floor(16.666666666666668),e,n,l={},f=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(c){var d=Math.random();return l[d]=requestAnimationFrame(function i(m){f===m||f+r-1<m?(f=m,delete l[d],c()):l[d]=requestAnimationFrame(i)}),d},n=function(c){l[c]&&cancelAnimationFrame(l[c])}):(e=function(c){return setTimeout(c,r)},n=function(c){return clearTimeout(c)}),{frame:e,cancel:n}}(),dt=function(){var r,e,n={};function l(f){function c(d,i){f.postMessage({options:d||{},callback:i})}f.init=function(i){var m=i.transferControlToOffscreen();f.postMessage({canvas:m},[m])},f.fire=function(i,m,M){if(e)return c(i,null),e;var T=Math.random().toString(36).slice(2);return e=Me(function(x){function k(E){E.data.callback===T&&(delete n[T],f.removeEventListener("message",k),e=null,j.clear(),M(),x())}f.addEventListener("message",k),c(i,T),n[T]=k.bind(null,{data:{callback:T}})}),e},f.reset=function(){f.postMessage({reset:!0});for(var i in n)n[i](),delete n[i]}}return function(){if(r)return r;if(!Fe&&Re){var f=["var CONFETTI, SIZE = {}, module = {};","("+Ne.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([f])))}catch(c){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",c),null}l(r)}return r}}(),mt={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function pe(r,e){return e?e(r):r}function Ee(r){return r!=null}function R(r,e,n){return pe(r&&Ee(r[e])?r[e]:mt[e],n)}function pt(r){return r<0?0:Math.floor(r)}function gt(r,e){return Math.floor(Math.random()*(e-r))+r}function g(r){return parseInt(r,16)}function _t(r){return r.map(I)}function I(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:g(e.substring(0,2)),g:g(e.substring(2,4)),b:g(e.substring(4,6))}}function G(r){var e=R(r,"origin",Object);return e.x=R(e,"x",Number),e.y=R(e,"y",Number),e}function bt(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function ee(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function ie(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function ve(r,e,n,l,f,c,d,i,m){r.save(),r.translate(e,n),r.rotate(c),r.scale(l,f),r.arc(0,0,1,d,i,m),r.restore()}function te(r){var e=r.angle*(Math.PI/180),n=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*n-Math.random()*n),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function ge(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var n=e.tick++/e.totalTicks,l=e.x+e.random*e.tiltCos,f=e.y+e.random*e.tiltSin,c=e.wobbleX+e.random*e.tiltCos,d=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-n)+")",r.beginPath(),Ue&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(Z(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(c-l)*.1,Math.abs(d-f)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var i=Math.PI/10*e.wobble,m=Math.abs(c-l)*.1,M=Math.abs(d-f)*.1,T=e.shape.bitmap.width*e.scalar,x=e.shape.bitmap.height*e.scalar,k=new DOMMatrix([Math.cos(i)*m,Math.sin(i)*m,-Math.sin(i)*M,Math.cos(i)*M,e.x,e.y]);k.multiplySelf(new DOMMatrix(e.shape.matrix));var E=r.createPattern(j.transform(e.shape.bitmap),"no-repeat");E.setTransform(k),r.globalAlpha=1-n,r.fillStyle=E,r.fillRect(e.x-T/2,e.y-x/2,T,x),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(c-l)*e.ovalScalar,Math.abs(d-f)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):ve(r,e.x,e.y,Math.abs(c-l)*e.ovalScalar,Math.abs(d-f)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var p=Math.PI/2*3,D=4*e.scalar,O=8*e.scalar,J=e.x,ae=e.y,K=5,se=Math.PI/K;K--;)J=e.x+Math.cos(p)*O,ae=e.y+Math.sin(p)*O,r.lineTo(J,ae),p+=se,J=e.x+Math.cos(p)*D,ae=e.y+Math.sin(p)*D,r.lineTo(J,ae),p+=se;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(f)),r.lineTo(Math.floor(c),Math.floor(d)),r.lineTo(Math.floor(l),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function _e(r,e,n,l,f){var c=e.slice(),d=r.getContext("2d"),i,m,M=Me(function(T){function x(){i=m=null,d.clearRect(0,0,l.width,l.height),j.clear(),f(),T()}function k(){Fe&&!(l.width===Ie.width&&l.height===Ie.height)&&(l.width=r.width=Ie.width,l.height=r.height=Ie.height),!l.width&&!l.height&&(n(r),l.width=r.width,l.height=r.height),d.clearRect(0,0,l.width,l.height),c=c.filter(function(E){return ge(d,E)}),c.length?i=Ce.frame(k):x()}i=Ce.frame(k),m=x});return{addFettis:function(T){return c=c.concat(T),M},canvas:r,promise:M,reset:function(){i&&Ce.cancel(i),m&&m()}}}function N(r,e){var n=!r,l=!!R(e||{},"resize"),f=!1,c=R(e,"disableForReducedMotion",Boolean),d=Re&&!!R(e||{},"useWorker"),i=d?dt():null,m=n?bt:ee,M=r&&i?!!r.__confetti_initialized:!1,T=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,x;function k(p,D,O){for(var J=R(p,"particleCount",pt),ae=R(p,"angle",Number),K=R(p,"spread",Number),se=R(p,"startVelocity",Number),wt=R(p,"decay",Number),je=R(p,"gravity",Number),Ge=R(p,"drift",Number),Pe=R(p,"colors",_t),rt=R(p,"ticks",Number),at=R(p,"shapes"),yt=R(p,"scalar"),Mt=!!R(p,"flat"),ze=G(p),He=J,$e=[],Ve=r.width*ze.x,st=r.height*ze.y;He--;)$e.push(te({x:Ve,y:st,angle:ae,spread:K,startVelocity:se,color:Pe[He%Pe.length],shape:at[gt(0,at.length)],ticks:rt,decay:wt,gravity:je,drift:Ge,scalar:yt,flat:Mt}));return x?x.addFettis($e):(x=_e(r,$e,m,D,O),x.promise)}function E(p){var D=c||R(p,"disableForReducedMotion",Boolean),O=R(p,"zIndex",Number);if(D&&T)return Me(function(se){se()});n&&x?r=x.canvas:n&&!r&&(r=ie(O),document.body.appendChild(r)),l&&!M&&m(r);var J={width:r.width,height:r.height};i&&!M&&i.init(r),M=!0,i&&(r.__confetti_initialized=!0);function ae(){if(i){var se={getBoundingClientRect:function(){if(!n)return r.getBoundingClientRect()}};m(se),i.postMessage({resize:{width:se.width,height:se.height}});return}J.width=J.height=null}function K(){x=null,l&&(f=!1,W.removeEventListener("resize",ae)),n&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,M=!1)}return l&&!f&&(f=!0,W.addEventListener("resize",ae,!1)),i?i.fire(p,J,K):k(p,J,K)}return E.reset=function(){i&&i.reset(),x&&x.reset()},E}var he;function xe(){return he||(he=N(null,{useWorker:!0,resize:!0})),he}function Z(r,e,n,l,f,c,d){var i=new Path2D(r),m=new Path2D;m.addPath(i,new DOMMatrix(e));var M=new Path2D;return M.addPath(m,new DOMMatrix([Math.cos(d)*f,Math.sin(d)*f,-Math.sin(d)*c,Math.cos(d)*c,n,l])),M}function ce(r){if(!Ue)throw new Error("path confetti are not supported in this browser");var e,n;typeof r=="string"?e=r:(e=r.path,n=r.matrix);var l=new Path2D(e),f=document.createElement("canvas"),c=f.getContext("2d");if(!n){for(var d=1e3,i=d,m=d,M=0,T=0,x,k,E=0;E<d;E+=2)for(var p=0;p<d;p+=2)c.isPointInPath(l,E,p,"nonzero")&&(i=Math.min(i,E),m=Math.min(m,p),M=Math.max(M,E),T=Math.max(T,p));x=M-i,k=T-m;var D=10,O=Math.min(D/x,D/k);n=[O,0,0,O,-Math.round(x/2+i)*O,-Math.round(k/2+m)*O]}return{type:"path",path:e,matrix:n}}function re(r){var e,n=1,l="#000000",f='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,n="scalar"in r?r.scalar:n,f="fontFamily"in r?r.fontFamily:f,l="color"in r?r.color:l);var c=10*n,d=""+c+"px "+f,i=new OffscreenCanvas(c,c),m=i.getContext("2d");m.font=d;var M=m.measureText(e),T=Math.ceil(M.actualBoundingBoxRight+M.actualBoundingBoxLeft),x=Math.ceil(M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),k=2,E=M.actualBoundingBoxLeft+k,p=M.actualBoundingBoxAscent+k;T+=k+k,x+=k+k,i=new OffscreenCanvas(T,x),m=i.getContext("2d"),m.font=d,m.fillStyle=l,m.fillText(e,E,p);var D=1/n;return{type:"bitmap",bitmap:i.transferToImageBitmap(),matrix:[D,0,0,D,-T*D/2,-x*D/2]}}le.exports=function(){return xe().apply(this,arguments)},le.exports.reset=function(){xe().reset()},le.exports.create=N,le.exports.shapeFromPath=ce,le.exports.shapeFromText=re})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),It,!1);const Wt=It.exports;It.exports.create;var fr=S('<span class="dissolve svelte-tfcqlg" style="animation: dissolve 1s ease-in;"> <strong class="svelte-tfcqlg"> </strong> </span>'),vr=S("<span> </span>"),hr=S('<span class="blinking-cursor svelte-tfcqlg">|</span>'),dr=S("<!><!>",1),mr=S('<span class="placeholder-ellipsis svelte-tfcqlg">...</span>'),pr=S('<span class="blinking-cursor svelte-tfcqlg">|</span>'),gr=S('<span class="hard-mode-display svelte-tfcqlg"><!></span> <input type="text" class="hard-mode-input-real svelte-tfcqlg"/> <span class="punctuation svelte-tfcqlg"> </span>',1),_r=S('<option class="svelte-tfcqlg"> </option>'),br=S('<select class="svelte-tfcqlg"><option class="svelte-tfcqlg">--</option><!></select><span class="punctuation svelte-tfcqlg"> </span>',1),wr=S(" <!>",1),yr=S("<span> </span>"),Mr=S('<p class="poem-line svelte-tfcqlg"><span class="line-content svelte-tfcqlg"><!></span> <span class="line-result-column svelte-tfcqlg"><!></span></p>'),Cr=S('<button class="hint-button svelte-tfcqlg">ðŸ’¡ Hint</button>'),xr=S('<button class="fifty-fifty-button svelte-tfcqlg">ðŸ’¡ Hint: 50/50</button>'),qr=S('<div class="button-group svelte-tfcqlg"><button class="check-button svelte-tfcqlg">ðŸ“š Check Answer</button> <!> <button class="give-up-button svelte-tfcqlg">Give up</button></div>'),Sr=S('<span class="hints-used svelte-tfcqlg"> </span>'),Tr=S('<span class="fifty-fifty-used svelte-tfcqlg"> </span>'),kr=S("<button> </button>"),Fr=S('<div class="author-guess-section svelte-tfcqlg" style="animation: fadeInUp 0.6s ease-out;"><h3 class="svelte-tfcqlg">Who wrote this poem?</h3> <div class="author-buttons svelte-tfcqlg"></div></div>'),Ir=S('<img class="author-image svelte-tfcqlg"/>'),Rr=S('<div class="reveal-box svelte-tfcqlg" style="animation: fadeInUp 0.8s ease-out;"><p> </p> <div class="reveal-content-box svelte-tfcqlg"><!> <p class="reveal-label svelte-tfcqlg">The correct author was:</p> <p class="reveal-author-name svelte-tfcqlg"> </p> <p class="reveal-label svelte-tfcqlg">Excerpt from:</p> <p class="reveal-title svelte-tfcqlg"> </p></div> <a class="poem-link-button svelte-tfcqlg" target="_blank" rel="noopener noreferrer">Read this poem â†’</a> <a class="wiki-link-button svelte-tfcqlg" target="_blank" rel="noopener noreferrer">Learn more about this author â†’</a> <button class="share-button svelte-tfcqlg"><span class="svelte-tfcqlg">Share your results <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24" width="20" class="svelte-tfcqlg"><path fill="white" d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" class="svelte-tfcqlg"></path></svg></span></button></div>'),Er=S('<div class="copy-notification svelte-tfcqlg">Score copied to clipboard!</div>'),Pr=S('<div class="result-toast svelte-tfcqlg"> </div>'),Ar=S('<div class="container svelte-tfcqlg"><div class="poem-wrapper svelte-tfcqlg"><h3 class="instruction-title svelte-tfcqlg">Complete the rhymes in this poem. <span class="instruction-subtitle svelte-tfcqlg"><!></span></h3> <div class="poem svelte-tfcqlg"></div></div> <!> <div class="attempts-info svelte-tfcqlg"> <span class="score svelte-tfcqlg"> </span> <!> <!></div> <!> <!> <!></div>');function Lr(Ne,W){Dt(W,!0);const le=()=>ar(ir,"$page",Fe),[Fe,Ie]=rr(),Re=At("data"),Ue=Re.poemsData,ht=Re.allAuthors,tt=Re.authorImages,Me=At("hardMode"),j=we(()=>(Me==null?void 0:Me.isHardMode)??!1),Ce=new Date,dt=`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}-${String(Ce.getDate()).padStart(2,"0")}`;function mt(){{const a=le().url.searchParams.get("date");if(a)return a}return dt}let pe=we(mt);function Ee(a,o){const s=[...a];let v=o;for(let h=s.length-1;h>0;h--){v=(v*9301+49297)%233280;const b=Math.floor(v/233280*(h+1));[s[h],s[b]]=[s[b],s[h]]}return s}function R(a){const[o,s,v]=a.split("-");return`${s}-${v}-${o}`}function pt(a){const o=R(a);let s=Ue[o];if(!s){const z=Object.values(Ue),[oe,A,V]=a.split("-").map(Number),ue=new Date(oe,A-1,V),Ae=Math.floor(ue.getTime()/(1e3*60*60*24));s=z[Ae%z.length]}const[v,h,b]=a.split("-").map(Number),F=new Date(v,h-1,b),q=Math.floor(F.getTime()/(1e3*60*60*24)),P=s.lines.map((z,oe)=>{let A=[];const V=!z.line_text||z.line_text.trim()==="";if(!z.no_choices&&!V){const ue=z.correct_last_word,Le=Ee(z.distractors,q+oe).slice(0,2),ne=[ue,...Le];A=Ee(ne,q+oe+1e3)}return{...z,choices:A}});return{...s,author_image:tt[s.author_name]||s.author_image||"",lines:P}}function gt(a,o){const[s,v,h]=a.split("-").map(Number),b=new Date(s,v-1,h),F=Math.floor(b.getTime()/(1e3*60*60*24)),q=ht.filter(oe=>oe&&oe!==o.author_name).sort(),z=Ee(q,F).slice(0,4);return Ee([o.author_name,...z],F)}let g=we(()=>pt(t(pe))),_t=we(()=>gt(t(pe),t(g))),I=U(et(t(g).lines.map(()=>""))),G=U(0),bt=3,ee=U(0),ie=U(!1),ve=U(!1),te=U(""),ge=U(!1),_e=U(!1),N=U(et(t(g).lines.map(()=>null))),he=U(et(t(g).lines.map(()=>""))),xe=U(null),Z=U(0),ce=U(et(t(g).lines.map(()=>null))),re=U(0);function r(){const a=localStorage.getItem("rhymedle-game");if(a)try{const s=JSON.parse(a)[t(pe)];s&&(u(I,s.selectedWords||t(g).lines.map(()=>""),!0),u(G,s.attemptsUsed||0,!0),u(ee,s.correctCount||0,!0),u(ie,s.showFinalReveal||!1,!0),u(ve,s.showAuthorGuess||!1,!0),u(te,s.selectedAuthor||"",!0),u(ge,s.authorSubmitted||!1,!0),u(_e,s.showDramaticReveal||!1,!0),u(N,s.lineResults||t(g).lines.map(()=>null),!0),u(he,s.lastCheckedWords||t(g).lines.map(()=>""),!0),u(Z,s.hintsUsed||0,!0),u(ce,s.fiftyFiftyChoices||t(g).lines.map(()=>null),!0),u(re,s.fiftyFiftyUsed||0,!0))}catch(o){console.error("Error loading game state:",o)}}function e(){const a=localStorage.getItem("rhymedle-game"),o=a?JSON.parse(a):{};o[t(pe)]={selectedWords:t(I),attemptsUsed:t(G),correctCount:t(ee),totalCount:c,showFinalReveal:t(ie),showAuthorGuess:t(ve),selectedAuthor:t(te),authorSubmitted:t(ge),showDramaticReveal:t(_e),lineResults:t(N),lastCheckedWords:t(he),hintsUsed:t(Z),fiftyFiftyChoices:t(ce),fiftyFiftyUsed:t(re)},localStorage.setItem("rhymedle-game",JSON.stringify(o))}let n=!1;kt(()=>{t(pe)&&(n=!0,u(I,t(g).lines.map(()=>""),!0),u(G,0),u(ee,0),u(ie,!1),u(ve,!1),u(te,""),u(ge,!1),u(_e,!1),u(N,t(g).lines.map(()=>null),!0),u(Z,0),u(ce,t(g).lines.map(()=>null),!0),u(re,0),r(),n=!1)}),kt(()=>{!n&&ur&&(t(I),t(G),t(ee),t(ie),t(ve),t(te),t(ge),t(_e),t(N),t(he),t(Z),t(ce),t(re),e())});function l(a){return!a.line_text||a.line_text.trim()===""}const f=t(g).lines.filter(a=>!a.no_choices&&!l(a));let c=et(f.length);function d(){let a=0;const o=[];t(g).lines.forEach((s,v)=>{var h;if(s.no_choices||l(s))o.push(null);else{let b;if(t(j)){const{word:F}=K(s.correct_last_word||"");b=((h=t(I)[v])==null?void 0:h.toLowerCase())===F.toLowerCase()}else b=t(I)[v]===s.correct_last_word;o.push(b?"correct":"incorrect"),b&&a++}}),u(N,o,!0),u(ee,a,!0),Ft(G),u(he,[...t(I)],!0),(a===c||t(G)>=bt)&&(u(ie,!0),u(ve,!0),J(),a===c&&i())}function i(){const a=Date.now()+1200,o=["#10493b","#d2a710","#ffffff"];(function s(){Wt({particleCount:3,angle:60,spread:55,origin:{x:0},colors:o}),Wt({particleCount:3,angle:120,spread:55,origin:{x:1},colors:o}),Date.now()<a&&requestAnimationFrame(s)})()}function m(){u(ge,!0),u(_e,!0),t(te)===t(g).author_name&&i()}function M(){const a=t(g).lines.map((o,s)=>o.no_choices||l(o)?null:t(I)[s]===o.correct_last_word?"correct":"incorrect");u(N,a,!0),u(ie,!0),u(ve,!0),J()}function T(){t(j)&&(Ft(Z),t(g).lines.forEach((a,o)=>{if(!a.no_choices&&!l(a)){const{word:s}=K(a.correct_last_word||""),v=s.substring(0,t(Z)),h=t(I)[o].toLowerCase(),b=s.substring(0,h.length).toLowerCase();(h!==b||t(I)[o].length<t(Z))&&(t(I)[o]=v)}}))}function x(){if(t(j))return;Ft(re);const a=[...t(ce)];t(g).lines.forEach((o,s)=>{if(!o.no_choices&&!l(o)&&t(N)[s]!=="correct"&&!t(ce)[s]){const v=o.correct_last_word,h=o.choices.filter(P=>P!==v),b=Math.floor(Math.random()*h.length),F=h[b],q=Math.random()<.5?[v,F]:[F,v];a[s]=q}}),u(ce,a,!0)}async function k(){const a=t(te)===t(g).author_name,o=t(j)?"Hard Mode":"Easy Mode",s=t(j)&&t(Z)>0?`, ${t(Z)} hint${t(Z)>1?"s":""}`:"",v=!t(j)&&t(re)>0?`, ${t(re)} hint${t(re)>1?"s":""} (50/50)`:"",h=`Rhymedle ${t(pe)} (${o})

Rhymes: ${t(ee)}/${c} (${t(G)===0?"gave up":`${t(G)} attempt${t(G)>1?"s":""}`}${s}${v})
Author: ${a?"âœ“":"âœ—"}

${window.location.origin}${window.location.pathname.replace(/\/$/,"")}`;if("ontouchstart"in window&&window.innerWidth<=768&&navigator.share)try{await navigator.share({text:h})}catch(F){F.name!=="AbortError"&&E(h)}else E(h)}function E(a){navigator.clipboard.writeText(a).then(()=>{u(p,!0),setTimeout(()=>{u(p,!1)},2e3)})}let p=U(!1),D=U(!1),O=U("");function J(){t(ee)===c&&t(G)===1?u(O,"Perfect!"):t(ee)===c?u(O,"Excellent!"):t(ee)>=c*.7?u(O,"Well done!"):t(ee)>=c*.5?u(O,"Good effort!"):u(O,"Keep practicing!"),u(D,!0),setTimeout(()=>{u(D,!1)},2e3)}function ae(a){return a.split(" ").slice(0,-1).join(" ")}function K(a){const o=a.match(/^(.+?)([.,;:!?\-â€”]*)$/);return o?{word:o[1],punctuation:o[2]}:{word:a,punctuation:""}}function se(a){return a?`https://en.wikipedia.org/wiki/${a.replace(/ /g,"_")}`:""}function wt(a,o,s,v){var q;if(!a||s>=a.length||!t(N)[v]||t(N)[v]===null)return"";const h=t(he)[v]||"";if(s>=h.length||a[s]!==h[s])return"";const b=a[s].toLowerCase(),F=(q=o[s])==null?void 0:q.toLowerCase();return b===F?"correct-letter":"incorrect-letter"}kt(()=>t(g).lines.every((o,s)=>{if(o.no_choices||l(o))return!0;if(t(j)){const{word:v}=K(o.correct_last_word||"");return t(I)[s].toLowerCase()===v.toLowerCase()}return t(I)[s]!==""}));var je=Ar(),Ge=y(je),Pe=y(Ge),rt=C(y(Pe)),at=y(rt);{var yt=a=>{var o=lt("(Fill in the Blank)");_(a,o)},Mt=a=>{var o=lt("(Select One)");_(a,o)};B(at,a=>{t(j)?a(yt):a(Mt,!1)})}w(rt),w(Pe);var ze=C(Pe,2);ct(ze,21,()=>t(g).lines,ut,(a,o,s)=>{var v=Mr(),h=y(v),b=y(h);{var F=A=>{var V=lt("Â ");_(A,V)},q=A=>{var V=it(),ue=ye(V);{var Ae=ne=>{var de=lt();$(()=>L(de,t(o).line_text)),_(ne,de)},Le=ne=>{var de=it(),xt=ye(de);{var qe=We=>{const De=we(()=>{const{word:Y,punctuation:be}=K(t(o).correct_last_word||"");return{word:Y,punctuation:be}});var Oe=fr(),Je=y(Oe),Ke=C(Je),qt=y(Ke,!0);w(Ke);var St=C(Ke,1,!0);w(Oe),$(Y=>{L(Je,`${Y??""} `),L(qt,t(De).word),L(St,t(De).punctuation)},[()=>ae(t(o).line_text)]),_(We,Oe)},Ze=We=>{const De=we(()=>{const{word:Y,punctuation:be}=K(t(o).correct_last_word||"");return{correctWord:Y,punctuation:be}});var Oe=wr(),Je=ye(Oe),Ke=C(Je);{var qt=Y=>{var be=gr(),Se=ye(be);Se.__click=H=>{const Q=H.currentTarget.nextElementSibling;Q&&Q.focus()};var Te=y(Se);{var Ye=H=>{var Q=dr(),fe=ye(Q);ct(fe,17,()=>t(I)[s],ut,(X,ke,Zt)=>{var nt=vr(),Jt=y(nt,!0);w(nt),$(Kt=>{ft(nt,1,`letter-char ${Kt??""}`,"svelte-tfcqlg"),L(Jt,t(ke))},[()=>wt(t(I)[s],t(De).correctWord,Zt,s)]),_(X,nt)});var Xe=C(fe);{var Be=X=>{var ke=hr();_(X,ke)};B(Xe,X=>{t(xe)===s&&X(Be)})}_(H,Q)},Tt=H=>{var Q=it(),fe=ye(Q);{var Xe=X=>{var ke=mr();_(X,ke)},Be=X=>{var ke=pr();_(X,ke)};B(fe,X=>{t(xe)!==s?X(Xe):X(Be,!1)},!0)}_(H,Q)};B(Te,H=>{t(I)[s]?H(Ye):H(Tt,!1)})}w(Se);var me=C(Se,2);or(me);var ot=C(me,2),Qe=y(ot,!0);w(ot),$(()=>{me.disabled=t(G)>0&&t(N)[s]==="correct",L(Qe,t(De).punctuation)}),Lt("focus",me,H=>{u(xe,s,!0);const Q=H.target;setTimeout(()=>{Q.selectionStart=Q.selectionEnd=Q.value.length},0)}),Lt("blur",me,()=>u(xe,null)),lr(me,()=>t(I)[s],H=>t(I)[s]=H),_(Y,be)},St=Y=>{const be=we(()=>t(ce)[s]||t(o).choices);var Se=br(),Te=ye(Se),Ye=y(Te);Ye.value=Ye.__value="";var Tt=C(Ye);ct(Tt,17,()=>t(be),ut,(Qe,H)=>{const Q=we(()=>{const{word:X}=K(t(H));return{word:X}});var fe=_r(),Xe=y(fe,!0);w(fe);var Be={};$(()=>{L(Xe,t(Q).word),Be!==(Be=t(H))&&(fe.value=(fe.__value=t(H))??"")}),_(Qe,fe)}),w(Te);var me=C(Te),ot=y(me,!0);w(me),$(()=>{Te.disabled=t(G)>0&&t(N)[s]==="correct",L(ot,t(De).punctuation)}),nr(Te,()=>t(I)[s],Qe=>t(I)[s]=Qe),_(Y,Se)};B(Ke,Y=>{t(j)?Y(qt):Y(St,!1)})}$(Y=>L(Je,`${Y??""} `),[()=>ae(t(o).line_text)]),_(We,Oe)};B(xt,We=>{t(ie)?We(qe):We(Ze,!1)},!0)}_(ne,de)};B(ue,ne=>{t(o).no_choices?ne(Ae):ne(Le,!1)},!0)}_(A,V)};B(b,A=>{!t(o).line_text||t(o).line_text.trim()===""?A(F):A(q,!1)})}w(h);var P=C(h,2),z=y(P);{var oe=A=>{var V=yr(),ue=y(V,!0);w(V),$(()=>{ft(V,1,`line-result ${t(N)[s]??""}`,"svelte-tfcqlg"),L(ue,t(N)[s]==="correct"?"âœ“":"âœ—")}),_(A,V)};B(z,A=>{t(N)[s]&&!t(o).no_choices&&!l(t(o))&&A(oe)})}w(P),w(v),_(a,v)}),w(ze),w(Ge);var He=C(Ge,2);{var $e=a=>{var o=qr(),s=y(o);s.__click=d;var v=C(s,2);{var h=q=>{var P=Cr();P.__click=T,_(q,P)},b=q=>{var P=xr();P.__click=x,_(q,P)};B(v,q=>{t(j)?q(h):q(b,!1)})}var F=C(v,2);F.__click=M,w(o),$(q=>s.disabled=q,[()=>t(g).lines.some((q,P)=>!q.no_choices&&!l(q)&&t(I)[P]==="")]),_(a,o)};B(He,a=>{t(ie)||a($e)})}var Ve=C(He,2),st=y(Ve),Ct=C(st),Bt=y(Ct);w(Ct);var Rt=C(Ct,2);{var Nt=a=>{var o=Sr(),s=y(o);w(o),$(()=>L(s,`Hints: ${t(Z)??""}`)),_(a,o)};B(Rt,a=>{t(j)&&t(Z)>0&&a(Nt)})}var Ut=C(Rt,2);{var jt=a=>{var o=Tr(),s=y(o);w(o),$(()=>L(s,`Hints: ${t(re)??""} (50/50)`)),_(a,o)};B(Ut,a=>{!t(j)&&t(re)>0&&a(jt)})}w(Ve);var Et=C(Ve,2);{var Gt=a=>{var o=Fr(),s=C(y(o),2);ct(s,21,()=>t(_t).filter(v=>v&&v.trim()),ut,(v,h)=>{var b=kr();b.__click=()=>{u(te,t(h),!0),m()};var F=y(b,!0);w(b),$(()=>{ft(b,1,`author-button ${t(te)===t(h)?"selected":""}`,"svelte-tfcqlg"),L(F,t(h))}),_(v,b)}),w(s),w(o),_(a,o)},zt=a=>{var o=it(),s=ye(o);{var v=h=>{var b=Rr(),F=y(b),q=y(F);w(F);var P=C(F,2),z=y(P);{var oe=qe=>{var Ze=Ir();$(()=>{vt(Ze,"src",t(g).author_image),vt(Ze,"alt",t(g).author_name)}),_(qe,Ze)};B(z,qe=>{t(g).author_image&&qe(oe)})}var A=C(z,4),V=y(A,!0);w(A);var ue=C(A,4),Ae=y(ue);w(ue),w(P);var Le=C(P,2),ne=C(Le,2),de=C(ne,2);de.__click=k;var xt=y(de);sr(xt,{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}),w(de),w(b),$(qe=>{ft(F,1,`guess-label ${t(te)===t(g).author_name?"correct-guess":"incorrect-guess"}`,"svelte-tfcqlg"),L(q,`You guessed: ${t(te)??""}`),L(V,t(g).author_name),L(Ae,`"${t(g).poem_title??""}"`),vt(Le,"href",t(g).poem_link),vt(ne,"href",qe)},[()=>se(t(g).author_name)]),_(h,b)};B(s,h=>{t(_e)&&h(v)},!0)}_(a,o)};B(Et,a=>{t(ve)&&!t(ge)?a(Gt):a(zt,!1)})}var Pt=C(Et,2);{var Ht=a=>{var o=Er();_(a,o)};B(Pt,a=>{t(p)&&a(Ht)})}var $t=C(Pt,2);{var Vt=a=>{var o=Pr(),s=y(o,!0);w(o),$(()=>L(s,t(O))),_(a,o)};B($t,a=>{t(D)&&a(Vt)})}w(je),$(()=>{L(st,`Attempts: ${(t(G)===0?0:t(G))??""} / 3 `),L(Bt,`Score: ${t(ee)??""} / ${c??""}`)}),_(Ne,je),Ot(),Ie()}tr(["click"]);var Wr=S('<meta name="description" content="Guess the rhyming word to complete the poem"/>');function $r(Ne,W){Dt(W,!0),Yt("data",W.data),er("1uha8ag",le=>{var Fe=Wr();Qt(()=>{Xt.title="Rhymedle - Daily Poetry Rhyme Game"}),_(le,Fe)}),Lr(Ne,{}),Ot()}export{$r as component};
