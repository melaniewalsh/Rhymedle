import"../chunks/CWj6FrbW.js";import{p as Tt,at as xt,ap as $,G as $e,i as t,e as bt,I as v,t as Y,a as Ft,as as qe,ar as q,c as M,r as y,aq as de,au as yt,av as Wt,W as Nt,aw as Bt}from"../chunks/CAX6gl9f.js";import{f as k,a as m,t as Te,c as Be}from"../chunks/C146iDKI.js";import{h as Ut}from"../chunks/DO1GGN61.js";import{e as jt,s as Gt,a as B,b as zt,g as St}from"../chunks/Bpzja2GA.js";import{i as A}from"../chunks/CDtaR5K7.js";import{e as st,d as ot,a as nt,f as Ht,b as Vt}from"../chunks/C6W_MUuC.js";import{r as Zt,s as wt}from"../chunks/BlguLOwI.js";import{b as Jt}from"../chunks/CpKzkNso.js";import{p as Kt}from"../chunks/D6V4D-xd.js";const $t=!0,Yt=$t;var Mt={};(function Ue(O,ie,Ae,Le){var De=!!(O.Worker&&O.Blob&&O.Promise&&O.OffscreenCanvas&&O.OffscreenCanvasRenderingContext2D&&O.HTMLCanvasElement&&O.HTMLCanvasElement.prototype.transferControlToOffscreen&&O.URL&&O.URL.createObjectURL),je=typeof Path2D=="function"&&typeof DOMMatrix=="function",lt=function(){if(!O.OffscreenCanvas)return!1;try{var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var n=r.transferToImageBitmap();e.createPattern(n,"no-repeat")}catch{return!1}return!0}();function Ye(){}function Fe(r){var e=ie.exports.Promise,n=e!==void 0?e:O.Promise;return typeof n=="function"?new n(r):(r(Ye,Ye),null)}var G=function(r,e){return{transform:function(n){if(r)return n;if(e.has(n))return e.get(n);var i=new OffscreenCanvas(n.width,n.height),l=i.getContext("2d");return l.drawImage(n,0,0),e.set(n,i),i},clear:function(){e.clear()}}}(lt,new Map),Ie=function(){var r=Math.floor(16.666666666666668),e,n,i={},l=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(f){var d=Math.random();return i[d]=requestAnimationFrame(function c(p){l===p||l+r-1<p?(l=p,delete i[d],f()):i[d]=requestAnimationFrame(c)}),d},n=function(f){i[f]&&cancelAnimationFrame(i[f])}):(e=function(f){return setTimeout(f,r)},n=function(f){return clearTimeout(f)}),{frame:e,cancel:n}}(),ct=function(){var r,e,n={};function i(l){function f(d,c){l.postMessage({options:d||{},callback:c})}l.init=function(c){var p=c.transferControlToOffscreen();l.postMessage({canvas:p},[p])},l.fire=function(c,p,w){if(e)return f(c,null),e;var P=Math.random().toString(36).slice(2);return e=Fe(function(C){function T(L){L.data.callback===P&&(delete n[P],l.removeEventListener("message",T),e=null,G.clear(),w(),C())}l.addEventListener("message",T),f(c,P),n[P]=T.bind(null,{data:{callback:P}})}),e},l.reset=function(){l.postMessage({reset:!0});for(var c in n)n[c](),delete n[c]}}return function(){if(r)return r;if(!Ae&&De){var l=["var CONFETTI, SIZE = {}, module = {};","("+Ue.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([l])))}catch(f){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",f),null}i(r)}return r}}(),it={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function Me(r,e){return e?e(r):r}function Oe(r){return r!=null}function E(r,e,n){return Me(r&&Oe(r[e])?r[e]:it[e],n)}function ut(r){return r<0?0:Math.floor(r)}function vt(r,e){return Math.floor(Math.random()*(e-r))+r}function b(r){return parseInt(r,16)}function ft(r){return r.map(R)}function R(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:b(e.substring(0,2)),g:b(e.substring(2,4)),b:b(e.substring(4,6))}}function z(r){var e=E(r,"origin",Object);return e.x=E(e,"x",Number),e.y=E(e,"y",Number),e}function ht(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function re(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function le(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function me(r,e,n,i,l,f,d,c,p){r.save(),r.translate(e,n),r.rotate(f),r.scale(i,l),r.arc(0,0,1,d,c,p),r.restore()}function se(r){var e=r.angle*(Math.PI/180),n=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*n-Math.random()*n),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function Ce(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var n=e.tick++/e.totalTicks,i=e.x+e.random*e.tiltCos,l=e.y+e.random*e.tiltSin,f=e.wobbleX+e.random*e.tiltCos,d=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-n)+")",r.beginPath(),je&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(Q(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(f-i)*.1,Math.abs(d-l)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var c=Math.PI/10*e.wobble,p=Math.abs(f-i)*.1,w=Math.abs(d-l)*.1,P=e.shape.bitmap.width*e.scalar,C=e.shape.bitmap.height*e.scalar,T=new DOMMatrix([Math.cos(c)*p,Math.sin(c)*p,-Math.sin(c)*w,Math.cos(c)*w,e.x,e.y]);T.multiplySelf(new DOMMatrix(e.shape.matrix));var L=r.createPattern(G.transform(e.shape.bitmap),"no-repeat");L.setTransform(T),r.globalAlpha=1-n,r.fillStyle=L,r.fillRect(e.x-P/2,e.y-C/2,P,C),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(f-i)*e.ovalScalar,Math.abs(d-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):me(r,e.x,e.y,Math.abs(f-i)*e.ovalScalar,Math.abs(d-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var h=Math.PI/2*3,H=4*e.scalar,Z=8*e.scalar,J=e.x,ae=e.y,ve=5,ne=Math.PI/ve;ve--;)J=e.x+Math.cos(h)*Z,ae=e.y+Math.sin(h)*Z,r.lineTo(J,ae),h+=ne,J=e.x+Math.cos(h)*H,ae=e.y+Math.sin(h)*H,r.lineTo(J,ae),h+=ne;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(l)),r.lineTo(Math.floor(f),Math.floor(d)),r.lineTo(Math.floor(i),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function xe(r,e,n,i,l){var f=e.slice(),d=r.getContext("2d"),c,p,w=Fe(function(P){function C(){c=p=null,d.clearRect(0,0,i.width,i.height),G.clear(),l(),P()}function T(){Ae&&!(i.width===Le.width&&i.height===Le.height)&&(i.width=r.width=Le.width,i.height=r.height=Le.height),!i.width&&!i.height&&(n(r),i.width=r.width,i.height=r.height),d.clearRect(0,0,i.width,i.height),f=f.filter(function(L){return Ce(d,L)}),f.length?c=Ie.frame(T):C()}c=Ie.frame(T),p=C});return{addFettis:function(P){return f=f.concat(P),w},canvas:r,promise:w,reset:function(){c&&Ie.cancel(c),p&&p()}}}function U(r,e){var n=!r,i=!!E(e||{},"resize"),l=!1,f=E(e,"disableForReducedMotion",Boolean),d=De&&!!E(e||{},"useWorker"),c=d?ct():null,p=n?ht:re,w=r&&c?!!r.__confetti_initialized:!1,P=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,C;function T(h,H,Z){for(var J=E(h,"particleCount",ut),ae=E(h,"angle",Number),ve=E(h,"spread",Number),ne=E(h,"startVelocity",Number),dt=E(h,"decay",Number),mt=E(h,"gravity",Number),Qe=E(h,"drift",Number),Ge=E(h,"colors",ft),pt=E(h,"ticks",Number),We=E(h,"shapes"),Xe=E(h,"scalar"),ze=!!E(h,"flat"),et=z(h),He=J,Ve=[],tt=r.width*et.x,gt=r.height*et.y;He--;)Ve.push(se({x:tt,y:gt,angle:ae,spread:ve,startVelocity:ne,color:Ge[He%Ge.length],shape:We[vt(0,We.length)],ticks:pt,decay:dt,gravity:mt,drift:Qe,scalar:Xe,flat:ze}));return C?C.addFettis(Ve):(C=xe(r,Ve,p,H,Z),C.promise)}function L(h){var H=f||E(h,"disableForReducedMotion",Boolean),Z=E(h,"zIndex",Number);if(H&&P)return Fe(function(ne){ne()});n&&C?r=C.canvas:n&&!r&&(r=le(Z),document.body.appendChild(r)),i&&!w&&p(r);var J={width:r.width,height:r.height};c&&!w&&c.init(r),w=!0,c&&(r.__confetti_initialized=!0);function ae(){if(c){var ne={getBoundingClientRect:function(){if(!n)return r.getBoundingClientRect()}};p(ne),c.postMessage({resize:{width:ne.width,height:ne.height}});return}J.width=J.height=null}function ve(){C=null,i&&(l=!1,O.removeEventListener("resize",ae)),n&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,w=!1)}return i&&!l&&(l=!0,O.addEventListener("resize",ae,!1)),c?c.fire(h,J,ve):T(h,J,ve)}return L.reset=function(){c&&c.reset(),C&&C.reset()},L}var pe;function ke(){return pe||(pe=U(null,{useWorker:!0,resize:!0})),pe}function Q(r,e,n,i,l,f,d){var c=new Path2D(r),p=new Path2D;p.addPath(c,new DOMMatrix(e));var w=new Path2D;return w.addPath(p,new DOMMatrix([Math.cos(d)*l,Math.sin(d)*l,-Math.sin(d)*f,Math.cos(d)*f,n,i])),w}function ue(r){if(!je)throw new Error("path confetti are not supported in this browser");var e,n;typeof r=="string"?e=r:(e=r.path,n=r.matrix);var i=new Path2D(e),l=document.createElement("canvas"),f=l.getContext("2d");if(!n){for(var d=1e3,c=d,p=d,w=0,P=0,C,T,L=0;L<d;L+=2)for(var h=0;h<d;h+=2)f.isPointInPath(i,L,h,"nonzero")&&(c=Math.min(c,L),p=Math.min(p,h),w=Math.max(w,L),P=Math.max(P,h));C=w-c,T=P-p;var H=10,Z=Math.min(H/C,H/T);n=[Z,0,0,Z,-Math.round(C/2+c)*Z,-Math.round(T/2+p)*Z]}return{type:"path",path:e,matrix:n}}function oe(r){var e,n=1,i="#000000",l='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,n="scalar"in r?r.scalar:n,l="fontFamily"in r?r.fontFamily:l,i="color"in r?r.color:i);var f=10*n,d=""+f+"px "+l,c=new OffscreenCanvas(f,f),p=c.getContext("2d");p.font=d;var w=p.measureText(e),P=Math.ceil(w.actualBoundingBoxRight+w.actualBoundingBoxLeft),C=Math.ceil(w.actualBoundingBoxAscent+w.actualBoundingBoxDescent),T=2,L=w.actualBoundingBoxLeft+T,h=w.actualBoundingBoxAscent+T;P+=T+T,C+=T+T,c=new OffscreenCanvas(P,C),p=c.getContext("2d"),p.font=d,p.fillStyle=i,p.fillText(e,L,h);var H=1/n;return{type:"bitmap",bitmap:c.transferToImageBitmap(),matrix:[H,0,0,H,-P*H/2,-C*H/2]}}ie.exports=function(){return ke().apply(this,arguments)},ie.exports.reset=function(){ke().reset()},ie.exports.create=U,ie.exports.shapeFromPath=ue,ie.exports.shapeFromText=oe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Mt,!1);const qt=Mt.exports;Mt.exports.create;var Qt=k('<span class="dissolve svelte-tfcqlg" style="animation: dissolve 1s ease-in;"> <strong class="svelte-tfcqlg"> </strong> </span>'),Xt=k("<span> </span>"),er=k('<span class="blinking-cursor svelte-tfcqlg">|</span>'),tr=k("<!><!>",1),rr=k('<span class="placeholder-ellipsis svelte-tfcqlg">...</span>'),ar=k('<span class="blinking-cursor svelte-tfcqlg">|</span>'),sr=k('<span class="hard-mode-display svelte-tfcqlg"><!></span> <input type="text" class="hard-mode-input-real svelte-tfcqlg"/> <span class="punctuation svelte-tfcqlg"> </span>',1),or=k('<option class="svelte-tfcqlg"> </option>'),nr=k('<select class="svelte-tfcqlg"><option class="svelte-tfcqlg">--</option><!></select><span class="punctuation svelte-tfcqlg"> </span>',1),lr=k(" <!>",1),cr=k("<span> </span>"),ir=k('<p class="poem-line svelte-tfcqlg"><!> <!></p>'),ur=k('<button class="hint-button svelte-tfcqlg">ðŸ’¡ Hint</button>'),vr=k('<button class="fifty-fifty-button svelte-tfcqlg">ðŸ’¡ Hint: 50/50</button>'),fr=k('<div class="button-group svelte-tfcqlg"><button class="check-button svelte-tfcqlg">ðŸ“š Check Answer</button> <!> <button class="give-up-button svelte-tfcqlg">Give up</button></div>'),hr=k('<span class="hints-used svelte-tfcqlg"> </span>'),dr=k('<span class="fifty-fifty-used svelte-tfcqlg"> </span>'),mr=k('<span class="subtle-message svelte-tfcqlg"><!></span>'),pr=k("<button> </button>"),gr=k('<div class="author-guess-section svelte-tfcqlg" style="animation: fadeInUp 0.6s ease-out;"><h3 class="svelte-tfcqlg">Who wrote this poem?</h3> <div class="author-buttons svelte-tfcqlg"></div></div>'),_r=k('<img class="author-image svelte-tfcqlg"/>'),br=k('<div class="reveal-box svelte-tfcqlg" style="animation: fadeInUp 0.8s ease-out;"><p> </p> <div class="reveal-content-box svelte-tfcqlg"><!> <p class="reveal-label svelte-tfcqlg">The correct author was:</p> <p class="reveal-author-name svelte-tfcqlg"> </p> <p class="reveal-label svelte-tfcqlg">Excerpt from:</p> <p class="reveal-title svelte-tfcqlg"> </p></div> <a class="poem-link-button svelte-tfcqlg" target="_blank" rel="noopener noreferrer">Read this poem â†’</a> <button class="share-button svelte-tfcqlg"><span class="svelte-tfcqlg">Share your results <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24" width="20" class="svelte-tfcqlg"><path fill="white" d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" class="svelte-tfcqlg"></path></svg></span></button></div>'),yr=k('<div class="copy-notification svelte-tfcqlg">Score copied to clipboard!</div>'),wr=k('<div class="container svelte-tfcqlg"><div class="poem-wrapper svelte-tfcqlg"><h3 class="instruction-title svelte-tfcqlg">Complete the rhymes in this poem. <span class="instruction-subtitle svelte-tfcqlg"><!></span></h3> <div class="poem svelte-tfcqlg"></div></div> <!> <div class="attempts-info svelte-tfcqlg"> <span class="score svelte-tfcqlg"> </span> <!> <!> <!></div> <!> <!></div>');function Mr(Ue,O){Tt(O,!0);const ie=()=>zt(Kt,"$page",Ae),[Ae,Le]=Gt(),De=xt("data"),je=De.poemsData,lt=De.allAuthors,Ye=De.authorImages,Fe=xt("hardMode"),G=qe(()=>(Fe==null?void 0:Fe.isHardMode)??!1),Ie=new Date,ct=`${Ie.getFullYear()}-${String(Ie.getMonth()+1).padStart(2,"0")}-${String(Ie.getDate()).padStart(2,"0")}`;function it(){{const s=ie().url.searchParams.get("date");if(s)return s}return ct}let Me=qe(it);function Oe(s,o){const a=[...s];let u=o;for(let g=a.length-1;g>0;g--){u=(u*9301+49297)%233280;const _=Math.floor(u/233280*(g+1));[a[g],a[_]]=[a[_],a[g]]}return a}function E(s){const[o,a,u]=s.split("-");return`${a}-${u}-${o}`}function ut(s){const o=E(s);let a=je[o];if(!a){const I=Object.values(je),[S,j,ge]=s.split("-").map(Number),_e=new Date(S,j-1,ge),X=Math.floor(_e.getTime()/(1e3*60*60*24));a=I[X%I.length]}const[u,g,_]=s.split("-").map(Number),x=new Date(u,g-1,_),F=Math.floor(x.getTime()/(1e3*60*60*24)),D=a.lines.map((I,S)=>{let j=[];if(!I.no_choices){const ge=I.correct_last_word,X=Oe(I.distractors,F+S).slice(0,2),W=[ge,...X];j=Oe(W,F+S+1e3)}return{...I,choices:j}});return{...a,author_image:Ye[a.author_name]||a.author_image||"",lines:D}}function vt(s,o){const[a,u,g]=s.split("-").map(Number),_=new Date(a,u-1,g),x=Math.floor(_.getTime()/(1e3*60*60*24)),F=lt.filter(S=>S&&S!==o.author_name).sort(),I=Oe(F,x).slice(0,4);return Oe([o.author_name,...I],x)}let b=qe(()=>ut(t(Me))),ft=qe(()=>vt(t(Me),t(b))),R=$($e(t(b).lines.map(()=>""))),z=$(0),ht=3,re=$(0),le=$(!1),me=$(!1),se=$(""),Ce=$(!1),xe=$(!1),U=$($e(t(b).lines.map(()=>null))),pe=$($e(t(b).lines.map(()=>""))),ke=$(null),Q=$(0),ue=$($e(t(b).lines.map(()=>null))),oe=$(0);function r(){const s=localStorage.getItem("rhymedle-game");if(s)try{const a=JSON.parse(s)[t(Me)];a&&(v(R,a.selectedWords||t(b).lines.map(()=>""),!0),v(z,a.attemptsUsed||0,!0),v(re,a.correctCount||0,!0),v(le,a.showFinalReveal||!1,!0),v(me,a.showAuthorGuess||!1,!0),v(se,a.selectedAuthor||"",!0),v(Ce,a.authorSubmitted||!1,!0),v(xe,a.showDramaticReveal||!1,!0),v(U,a.lineResults||t(b).lines.map(()=>null),!0),v(pe,a.lastCheckedWords||t(b).lines.map(()=>""),!0),v(Q,a.hintsUsed||0,!0),v(ue,a.fiftyFiftyChoices||t(b).lines.map(()=>null),!0),v(oe,a.fiftyFiftyUsed||0,!0))}catch(o){console.error("Error loading game state:",o)}}function e(){const s=localStorage.getItem("rhymedle-game"),o=s?JSON.parse(s):{};o[t(Me)]={selectedWords:t(R),attemptsUsed:t(z),correctCount:t(re),totalCount:l,showFinalReveal:t(le),showAuthorGuess:t(me),selectedAuthor:t(se),authorSubmitted:t(Ce),showDramaticReveal:t(xe),lineResults:t(U),lastCheckedWords:t(pe),hintsUsed:t(Q),fiftyFiftyChoices:t(ue),fiftyFiftyUsed:t(oe)},localStorage.setItem("rhymedle-game",JSON.stringify(o))}let n=!1;bt(()=>{t(Me)&&(n=!0,v(R,t(b).lines.map(()=>""),!0),v(z,0),v(re,0),v(le,!1),v(me,!1),v(se,""),v(Ce,!1),v(xe,!1),v(U,t(b).lines.map(()=>null),!0),v(Q,0),v(ue,t(b).lines.map(()=>null),!0),v(oe,0),r(),n=!1)}),bt(()=>{!n&&Yt&&(t(R),t(z),t(re),t(le),t(me),t(se),t(Ce),t(xe),t(U),t(pe),t(Q),t(ue),t(oe),e())});const i=t(b).lines.filter(s=>!s.no_choices);let l=$e(i.length);function f(){let s=0;const o=[];t(b).lines.forEach((a,u)=>{var g;if(a.no_choices)o.push(null);else{let _;if(t(G)){const{word:x}=h(a.correct_last_word||"");_=((g=t(R)[u])==null?void 0:g.toLowerCase())===x.toLowerCase()}else _=t(R)[u]===a.correct_last_word;o.push(_?"correct":"incorrect"),_&&s++}}),v(U,o,!0),v(re,s,!0),yt(z),v(pe,[...t(R)],!0),(s===l||t(z)>=ht)&&(v(le,!0),v(me,!0),s===l&&d())}function d(){const s=Date.now()+1200,o=["#10493b","#d2a710","#ffffff"];(function a(){qt({particleCount:3,angle:60,spread:55,origin:{x:0},colors:o}),qt({particleCount:3,angle:120,spread:55,origin:{x:1},colors:o}),Date.now()<s&&requestAnimationFrame(a)})()}function c(){v(Ce,!0),v(xe,!0),t(se)===t(b).author_name&&d()}function p(){const s=t(b).lines.map((o,a)=>o.no_choices?null:t(R)[a]===o.correct_last_word?"correct":"incorrect");v(U,s,!0),v(le,!0),v(me,!0)}function w(){t(G)&&(yt(Q),t(b).lines.forEach((s,o)=>{if(!s.no_choices){const{word:a}=h(s.correct_last_word||""),u=a.substring(0,t(Q)),g=t(R)[o].toLowerCase(),_=a.substring(0,g.length).toLowerCase();(g!==_||t(R)[o].length<t(Q))&&(t(R)[o]=u)}}))}function P(){if(t(G))return;yt(oe);const s=[...t(ue)];t(b).lines.forEach((o,a)=>{if(!o.no_choices&&t(U)[a]!=="correct"&&!t(ue)[a]){const u=o.correct_last_word,g=o.choices.filter(D=>D!==u),_=Math.floor(Math.random()*g.length),x=g[_],F=Math.random()<.5?[u,x]:[x,u];s[a]=F}}),v(ue,s,!0)}function C(){const s=t(se)===t(b).author_name,o=t(G)?"Hard Mode":"Easy Mode",a=t(G)&&t(Q)>0?`, ${t(Q)} hint${t(Q)>1?"s":""}`:"",u=!t(G)&&t(oe)>0?`, ${t(oe)} hint${t(oe)>1?"s":""} (50/50)`:"",g=`Rhymedle ${t(Me)} (${o})

Rhymes: ${t(re)}/${l} (${t(z)===0?"gave up":`${t(z)} attempt${t(z)>1?"s":""}`}${a}${u})
Author: ${s?"âœ“":"âœ—"}

${window.location.origin}`;navigator.clipboard.writeText(g).then(()=>{v(T,!0),setTimeout(()=>{v(T,!1)},2e3)})}let T=$(!1);function L(s){return s.split(" ").slice(0,-1).join(" ")}function h(s){const o=s.match(/^(.+?)([.,;:!?\-â€”]*)$/);return o?{word:o[1],punctuation:o[2]}:{word:s,punctuation:""}}function H(s,o,a,u){var F;if(!s||a>=s.length||!t(U)[u]||t(U)[u]===null)return"";const g=t(pe)[u]||"";if(a>=g.length||s[a]!==g[a])return"";const _=s[a].toLowerCase(),x=(F=o[a])==null?void 0:F.toLowerCase();return _===x?"correct-letter":"incorrect-letter"}bt(()=>t(b).lines.every((o,a)=>{if(o.no_choices)return!0;if(t(G)){const{word:u}=h(o.correct_last_word||"");return t(R)[a].toLowerCase()===u.toLowerCase()}return t(R)[a]!==""}));var Z=wr(),J=M(Z),ae=M(J),ve=q(M(ae)),ne=M(ve);{var dt=s=>{var o=Te("(Fill in the Blank)");m(s,o)},mt=s=>{var o=Te("(Select One)");m(s,o)};A(ne,s=>{t(G)?s(dt):s(mt,!1)})}y(ve),y(ae);var Qe=q(ae,2);st(Qe,21,()=>t(b).lines,ot,(s,o,a)=>{var u=ir(),g=M(u);{var _=I=>{var S=Te();Y(()=>B(S,t(o).line_text)),m(I,S)},x=I=>{var S=Be(),j=de(S);{var ge=X=>{const W=qe(()=>{const{word:N,punctuation:Se}=h(t(o).correct_last_word||"");return{word:N,punctuation:Se}});var K=Qt(),be=M(K),ce=q(be),ye=M(ce,!0);y(ce);var fe=q(ce,1,!0);y(K),Y(N=>{B(be,`${N??""} `),B(ye,t(W).word),B(fe,t(W).punctuation)},[()=>L(t(o).line_text)]),m(X,K)},_e=X=>{const W=qe(()=>{const{word:N,punctuation:Se}=h(t(o).correct_last_word||"");return{correctWord:N,punctuation:Se}});var K=lr(),be=de(K),ce=q(be);{var ye=N=>{var Se=sr(),Pe=de(Se);Pe.__click=V=>{const ee=V.currentTarget.nextElementSibling;ee&&ee.focus()};var Re=M(Pe);{var Ze=V=>{var ee=tr(),he=de(ee);st(he,17,()=>t(R)[a],ot,(te,Ee,Lt)=>{var at=Xt(),Dt=M(at,!0);y(at),Y(Ot=>{nt(at,1,`letter-char ${Ot??""}`,"svelte-tfcqlg"),B(Dt,t(Ee))},[()=>H(t(R)[a],t(W).correctWord,Lt,a)]),m(te,at)});var Ke=q(he);{var Ne=te=>{var Ee=er();m(te,Ee)};A(Ke,te=>{t(ke)===a&&te(Ne)})}m(V,ee)},_t=V=>{var ee=Be(),he=de(ee);{var Ke=te=>{var Ee=rr();m(te,Ee)},Ne=te=>{var Ee=ar();m(te,Ee)};A(he,te=>{t(ke)!==a?te(Ke):te(Ne,!1)},!0)}m(V,ee)};A(Re,V=>{t(R)[a]?V(Ze):V(_t,!1)})}y(Pe);var we=q(Pe,2);Zt(we);var rt=q(we,2),Je=M(rt,!0);y(rt),Y(()=>{we.disabled=t(z)>0&&t(U)[a]==="correct",B(Je,t(W).punctuation)}),St("focus",we,V=>{v(ke,a,!0);const ee=V.target;setTimeout(()=>{ee.selectionStart=ee.selectionEnd=ee.value.length},0)}),St("blur",we,()=>v(ke,null)),Jt(we,()=>t(R)[a],V=>t(R)[a]=V),m(N,Se)},fe=N=>{const Se=qe(()=>t(ue)[a]||t(o).choices);var Pe=nr(),Re=de(Pe),Ze=M(Re);Ze.value=Ze.__value="";var _t=q(Ze);st(_t,17,()=>t(Se),ot,(Je,V)=>{const ee=qe(()=>{const{word:te}=h(t(V));return{word:te}});var he=or(),Ke=M(he,!0);y(he);var Ne={};Y(()=>{B(Ke,t(ee).word),Ne!==(Ne=t(V))&&(he.value=(he.__value=t(V))??"")}),m(Je,he)}),y(Re);var we=q(Re),rt=M(we,!0);y(we),Y(()=>{Re.disabled=t(z)>0&&t(U)[a]==="correct",B(rt,t(W).punctuation)}),Ht(Re,()=>t(R)[a],Je=>t(R)[a]=Je),m(N,Pe)};A(ce,N=>{t(G)?N(ye):N(fe,!1)})}Y(N=>B(be,`${N??""} `),[()=>L(t(o).line_text)]),m(X,K)};A(j,X=>{t(le)?X(ge):X(_e,!1)},!0)}m(I,S)};A(g,I=>{t(o).no_choices?I(_):I(x,!1)})}var F=q(g,2);{var D=I=>{var S=cr(),j=M(S,!0);y(S),Y(()=>{nt(S,1,`line-result ${t(U)[a]??""}`,"svelte-tfcqlg"),B(j,t(U)[a]==="correct"?"âœ“":"âœ—")}),m(I,S)};A(F,I=>{t(U)[a]&&I(D)})}y(u),m(s,u)}),y(Qe),y(J);var Ge=q(J,2);{var pt=s=>{var o=fr(),a=M(o);a.__click=f;var u=q(a,2);{var g=F=>{var D=ur();D.__click=w,m(F,D)},_=F=>{var D=vr();D.__click=P,m(F,D)};A(u,F=>{t(G)?F(g):F(_,!1)})}var x=q(u,2);x.__click=p,y(o),Y(F=>a.disabled=F,[()=>t(b).lines.some((F,D)=>!F.no_choices&&t(R)[D]==="")]),m(s,o)};A(Ge,s=>{t(le)||s(pt)})}var We=q(Ge,2),Xe=M(We),ze=q(Xe),et=M(ze);y(ze);var He=q(ze,2);{var Ve=s=>{var o=hr(),a=M(o);y(o),Y(()=>B(a,`Hints: ${t(Q)??""}`)),m(s,o)};A(He,s=>{t(G)&&t(Q)>0&&s(Ve)})}var tt=q(He,2);{var gt=s=>{var o=dr(),a=M(o);y(o),Y(()=>B(a,`Hints: ${t(oe)??""} (50/50)`)),m(s,o)};A(tt,s=>{!t(G)&&t(oe)>0&&s(gt)})}var It=q(tt,2);{var kt=s=>{var o=mr(),a=M(o);{var u=_=>{var x=Te("â€” Perfect!");m(_,x)},g=_=>{var x=Be(),F=de(x);{var D=S=>{var j=Te("â€” Excellent!");m(S,j)},I=S=>{var j=Be(),ge=de(j);{var _e=W=>{var K=Te("â€” Well done!");m(W,K)},X=W=>{var K=Be(),be=de(K);{var ce=fe=>{var N=Te("â€” Good effort!");m(fe,N)},ye=fe=>{var N=Te("â€” Keep practicing!");m(fe,N)};A(be,fe=>{t(re)>=l*.5?fe(ce):fe(ye,!1)},!0)}m(W,K)};A(ge,W=>{t(re)>=l*.7?W(_e):W(X,!1)},!0)}m(S,j)};A(F,S=>{t(re)===l?S(D):S(I,!1)},!0)}m(_,x)};A(a,_=>{t(re)===l&&t(z)===1?_(u):_(g,!1)})}y(o),m(s,o)};A(It,s=>{t(le)&&s(kt)})}y(We);var Ct=q(We,2);{var Pt=s=>{var o=gr(),a=q(M(o),2);st(a,21,()=>t(ft).filter(u=>u&&u.trim()),ot,(u,g)=>{var _=pr();_.__click=()=>{v(se,t(g),!0),c()};var x=M(_,!0);y(_),Y(()=>{nt(_,1,`author-button ${t(se)===t(g)?"selected":""}`,"svelte-tfcqlg"),B(x,t(g))}),m(u,_)}),y(a),y(o),m(s,o)},Rt=s=>{var o=Be(),a=de(o);{var u=g=>{var _=br(),x=M(_),F=M(x);y(x);var D=q(x,2),I=M(D);{var S=ce=>{var ye=_r();Y(()=>{wt(ye,"src",t(b).author_image),wt(ye,"alt",t(b).author_name)}),m(ce,ye)};A(I,ce=>{t(b).author_image&&ce(S)})}var j=q(I,4),ge=M(j,!0);y(j);var _e=q(j,4),X=M(_e);y(_e),y(D);var W=q(D,2),K=q(W,2);K.__click=C;var be=M(K);Vt(be,{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}),y(K),y(_),Y(()=>{nt(x,1,`guess-label ${t(se)===t(b).author_name?"correct-guess":"incorrect-guess"}`,"svelte-tfcqlg"),B(F,`You guessed: ${t(se)??""}`),B(ge,t(b).author_name),B(X,`"${t(b).poem_title??""}"`),wt(W,"href",t(b).poem_link)}),m(g,_)};A(a,g=>{t(xe)&&g(u)},!0)}m(s,o)};A(Ct,s=>{t(me)&&!t(Ce)?s(Pt):s(Rt,!1)})}var Et=q(Ct,2);{var At=s=>{var o=yr();m(s,o)};A(Et,s=>{t(T)&&s(At)})}y(Z),Y(()=>{B(Xe,`Attempts: ${(t(z)===0?0:t(z))??""} / 3 `),B(et,`Score: ${t(re)??""} / ${l??""}`)}),m(Ue,Z),Ft(),Le()}jt(["click"]);var Cr=k('<meta name="description" content="Guess the rhyming word to complete the poem"/>');function Ar(Ue,O){Tt(O,!0),Wt("data",O.data),Ut("1uha8ag",ie=>{var Ae=Cr();Nt(()=>{Bt.title="Rhymedle - Daily Poetry Rhyme Game"}),m(ie,Ae)}),Mr(Ue,{}),Ft()}export{Ar as component};
